{% extends 'dashboard/base.html' %}
{% block title %} Shops{% endblock %}
{% load static %}


{%block css%}
{%endblock%}


{% block content %}
<link rel="stylesheet" href="{% static '/css/configurations/conf.css'%}">
<div class="configration-nav-container">

    {% include "configurations/side_nav.html" %}

    <!-- Shops View-->
    <div class="form_container" id="Shops">
        <div class="Fields-container configurations_fields_container">
            <div class="bigger_width_field">
                <label for="fname" class="labels">Search</label>
                <div class="search-box">
                    <img src="{% static '/images/search-1.png' %}" alt="">
                    <input id="search-input" type="text" placeholder="E.g. Oscar Brown" class="inputs" />
                </div>
            </div>
           
            <div class="small_width_field">
                <label for="cars" class="labels">Type</label>
                <div class="select-box">
                    <select name="cars" id="dynamic_select" class="dropdown_input">
                        {% for opt in shops_types %}
                            {% if option == opt%}
                            <option onclick="changeType('/configurations/shops/')" selected value="{{opt}}">{{opt}}</option>
                            {% else %}
                            <option onclick="changeType('/configurations/shops/')" value="{{opt}}">{{opt}}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                
            </div>
        
            <div class="btn_container">
                <button class=" add-btn" onclick="addConnector()" data-toggle="modal" data-target="#addShops"
                > <img  data-toggle="tooltip" data-placement="bottom" title="Add"  src="{% static '/images/plus-sign.png' %}" class="add_image" alt=""></button>
            </div>
        
        
        </div>
        <div class="table_container configurations_table_container"> 
            <table class="table configurations_table" id="table-shops" aria-describedby="shops">
                <thead>
                  <tr>
                    <th scope="col" hidden>ID</th>
                    <th scope="col" hidden>Path</th>
                    <th class=" text-left th_conf left_20px" scope="col" >Name</th>
                    <th scope="col" class="table-heading" onclick="orderByFunction('unique_identifier')">
                        Sort Order 
                        {% if prev_unique_identifier == 'Descending' %}
                            <img id="unique_identifier" class="order-by" src="{%static 'images/order-img.png'%}" alt="">
                        {% else %}
                            <img id="unique_identifier"  src="{%static 'images/order-img.png'%}" alt="">
                        {% endif %}
                    </th>
                    <th scope="col" class="text-center">Image</th>
                    <th scope="col" class="text-left">Type</th>
                    <th scope="col" class=" text-right right_20px th_conf">Action</th>
                  </tr>
                </thead>
                <tbody id="listingTable">
                </tbody>
                <tbody>
                    <tr>
                        <td colspan="7"  class="pagination_bx_background">
                            <div class="pagination_div">
                                <div class="record_count">
                                    <span id="record_count"></span>
                                </div>
                                <div class="pagination_buttons d-flex justify-content-lg-start align-items-center" id="pagination_button_box">
                                    <span class="pagination_button prev" id="button_prev">Previous</span>
                                    <span id="page_number"></span>
                                    <span class="pagination_button next" id="button_next">Next</span>
                                </div>
                        </div> 
                        </td>
                </tr></tbody>
              </table>
        </div>
    </div>

</div>


<!-- modal for add Shops -->
<div class="modal fade" id="addShops"  data-bs-keyboard="false" tabindex="-1" aria-labelledby="addShopsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content add_conf_modal" >
        <div class="modal-body">
            <div class="heading heading-mar">
                <h6 class="add_conf_heading">Add New Shop</h6>
                 <button type="button" class="btn-close"  data-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="d-flex flex-column">
                {% csrf_token %}
                <div class="container">
                    <div class="row">
                      <div class="col-sm shop_add_content_one">
                        <div id="d-flex flex-column" >
                            <label for="email" class="labels">Name</label><br>
                            <input type="text" id="service_name" class="txtbox input-txt inp-padding" name="service_name" placeholder="">
                        </div>
                      </div>

                      <div class="col-sm shop_add_content_two">
                        <div id="d-flex flex-column"  >
                            <label for="cars" class="labels">Type</label>
                            <div class="select-box shop-typ">
                                <select id="service_type" name="service_type" class="dropdown_input small_dropdown_input">
                                    {% for opt in shops_types|slice:"1:" %}
                                        <option onclick="changeType('/configurations/shops/')" value="{{opt}}">{{opt}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            
                        </div>
                      </div>

                      
                    </div>
                  </div>
                  
                <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <p class="service_info" data-toggle="collapse" data-target="#collapseImage"
                         aria-expanded="false" aria-controls="collapseImage">Unique ID 
                         <img class="i_icon" src="{% static '/images/i_icon.png' %}" 
                         onmouseover="show_info_box('unique_id_message')" 
                         onmouseout="hide_info_box('unique_id_message')" alt="">
                         <span id='show_tooltip_unique_id_message' class="icon-popup image_popup">
                             Unique id must be unique.</span></p>
                        
                        <input type="text" id="add_unique_identifier" 
                            class="txtbox input-txt" name="unique_identifier"
                            placeholder="">
                        <p id="add_shop_unique_id_error"></p>
                    </div>
                </div> 
                
                <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <label for="email" class="labels">Image</label><br>
                        <input type="text" id="image_path_src" hidden class="txtbox"  name="image_path" placeholder=""> 

                    </div>
                </div> 

                <div id="add_images_container">
                    <div id="d-flex flex-column"  class="mr-tp">
                    <input type="file" id="i_file"  name="filename" hidden accept=".jpeg,.jpg,.png"/>
                    <label for="i_file" class="add_images_label"><strong class=" pick-img">Add Image</strong></label>
                
                    </div>
                </div> 

            </div>
       
        </div>
        <div class="modal-footer modal_footer_padding">
            <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger" id="add_shop_button" onclick="addShopDetails()">Submit</button>
        </div>
      </div>
    </div>
</div>

<!-- modal for edit Shops -->
<div class="modal fade" id="editConnector"   data-bs-keyboard="false" tabindex="-1" aria-labelledby="editConnectorLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content add_conf_modal">
         
        <div class="modal-body">
            <div class="heading heading-mar">
                <h6 class="add_conf_heading">Edit Shop</h6>
                 <button type="button" class="btn-close" onclick="closeModal('#editConnector')" data-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="d-flex flex-column">
                
                <div class="container">
                    <div class="row">
                      <div class="col-sm shop_add_content_one">
                        <div id="d-flex flex-column" >
                            <label for="email" class="labels">Name</label><br>
                            <input type="text" id="conn_id" hidden name="type" placeholder="" value="Type 1">
                            <input type="text" id="conn_type" class="txtbox input-txt" name="type" placeholder="" value="Type 1">                        </div>
                      </div>

                      <div class="col-sm shop_add_content_two" >
                        <div id="d-flex flex-column"  >
                            <label for="cars" class="labels">Type</label>
                            <div class="select-box shop-typ">
                                <select id="conn_sub_type" name="service_type"  class="dropdown_input small_dropdown_input">
                                {% for opt in shops_types|slice:"1:" %}
                                    <option onclick="changeType('/configurations/shops/')" value="{{opt}}">{{opt}}</option>
                                {% endfor %}
                                </select>
                            </div>
                            
                        </div>
                      </div>
                    </div>
                  </div>
                  <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <p class="service_info" data-toggle="collapse" data-target="#collapseImage"
                         aria-expanded="false" aria-controls="collapseImage">Unique ID 
                         <img class="i_icon" src="{% static '/images/i_icon.png' %}" 
                         onmouseover="show_info_box('unique_id_message_update')" 
                         onmouseout="hide_info_box('unique_id_message_update')" alt="">
                         <span id='show_tooltip_unique_id_message_update' class="icon-popup image_popup">
                             Unique id must be unique.</span></p>
                        
                        <input type="text" id="update_unique_identifier" 
                            class="txtbox input-txt" name="unique_identifier"
                            placeholder="">
                        <p id="update_shop_unique_id_error"></p>
                    </div>
                </div> 

                <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <label for="email" class="labels">Image</label><br>
                        <input type="text" id="conn_img" class="txtbox input-txt" hidden name="type" placeholder="" value="Type 1">               
                    </div>
                </div>

                <div id="add_images_container1">
                    <div class="profile_container">
                        <div id='discard1' class='discard'>x</div>
                        <img class="profile_image_ service_image" src="{% static '/images/Group.png' %}" alt="">
                    </div>
                </div> 
            </div>
       
        </div>
        <div class="modal-footer modal_footer_padding">
            <button type="button" class="btn btn-light" onclick="closeModal('#editConnector')" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" id="update_shop_button" onclick="updateShop()">Submit</button>
        </div>
      </div>
    </div>
</div>


<!-- modal for delete Shops -->
<div class="modal fade" id="deleteAmenities"   data-bs-keyboard="false" tabindex="-1" aria-labelledby="deleteAmenitiesLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content delete_modal_style">
         
        <div class="modal-body">
            <div class="heading">
                <h6 class="add_conf_heading">Delete Shop</h6>
                 <button type="button" class="btn-close"  data-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="d-flex flex-column">
                
                <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <label for="email" class="labels" id="del-con-msg">Are you sure you want to remove <strong>Type 1</strong> shop?</label><br>
                    </div>
                </div> 

            </div>
       
        </div>
        <div class="modal-footer conf_modal_footer">
            <button type="button" class="btn btn-light" data-dismiss="modal">No
            </button>
            <button type="button" id="del-amen-itm" class="btn btn-danger">Yes</button>
        </div>
      </div>
    </div>
</div>

<!-- modal for view Shops details -->
<div class="modal fade" id="viewAmenities"   data-bs-keyboard="false" tabindex="-1" aria-labelledby="viewAmenitiesLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content view_conf_details">
         
        <div class="modal-body">
            <div class="heading heading-mar">
                <h6 class="add_conf_heading">Shop Details</h6>
                 <button type="button" class="btn-close"  data-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="d-flex flex-column">
               
                <div class="container">
                    <div class="row">
                      <div class="col-sm shop_add_content_one">
                        <div id="d-flex flex-column" >
                            <label for="email" class="labels">Name</label><br>
                            <h6 class="view-con-typ conf-details-heading"></h6>
                        </div>
                      </div>

                      <div class="col-sm shop_add_content_two">
                        <div id="d-flex flex-column" >
                            <label for="email" class="labels">Type</label><br>
                            <h6 class="view-con-sub-typ conf-details-heading"></h6>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                <div>
                    <div id="d-flex flex-column" >
                        <label for="email" class="labels">Unique id</label><br>
                        <h6 class="view-shop-id conf-details-heading"></h6>
                    </div>
                </div> 
                
                 <div>
                    <div id="d-flex flex-column"  class="mr-tp">
                        <label for="email" class="labels">Image</label><br>
                    </div>
                </div> 

                <div id="add_images_container" class="add_images_conf_container">
                    <div class="profile_container">
                        <div id='discard' class='discard'>X</div>
                        <img class="profile_image_ service_image view-con-img" src="{% static '/images/Group.png' %}" alt=""></div>
                </div> 

            </div>
       
       
        </div>
        <div class="modal-footer modal_footer_padding">
            <button onclick="deleteConnector()" type="button" class="btn btn-light" data-dismiss="modal">
                <img src="{% static '/images/delete.png' %}" class="delete-icn2" alt="">
            </button>
            <button onclick="switchToShopEditor()" type="button" class="btn btn-danger" data-dismiss="modal">
                <img src="{% static '/images/pencil-2.png' %}" class="delete-icn2" alt="">
            </button>
        </div>
      </div>
    </div>
</div>

{% endblock%}

<!-- javascript -->
{% block js %}
<script type="text/javascript">
    // This javascript code uses data from django tags
    var errors = ["{%for m in messages%}{{m}}{%endfor%}"];
    is_error = "{% firstof messages%}";
    let url_u= `{{update_url_param|safe}}`;
    let window_radirect_location = "{% url 'shops'%}";
    var token = '{{csrf_token}}';

    let add_shop_url = "{% url 'shops' %}";
    let update_shops_url = "{% url 'update_shop' %}";
    let check_service_id_availability_url = "{% url 'check_service_id_availability' %}";

    let group_png_url ="{% static '/images/Group.png' %}";
    let paginationObj = JSON.parse('{{json_data | escapejs }}');
    
    let pencilEditImage ="{% static '/images/pencil-2.png' %}";
    let deleteRowImage ="{% static '/images/delete.png' %}";
    let paginationCount = "{{pagination_count}}";
    let paginationFor = "shops";
</script>

<script src="{% static 'js/configurations/common-configurations-func.js' %}"></script>
<script src="{% static 'js/configurations/shops.js' %}"></script>
<script src="{% static 'js/configurations/pagination.js' %}"></script>
{% endblock %}
